!function(){function t(e){var i=e.document;!function(t){"use strict";var e,i,n,s,a,o={".js":[],".json":[],".css":[],".html":[]},r="function"==typeof require?require:null;return s=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},a=function(t,e,i){var n,s;if("function"==typeof t[e+i])return e+i;for(n=0;s=o[i][n];++n)if("function"==typeof t[e+s])return e+s;return null},e=function(t,n,o,r,l,u){var d,c,h,f,p,m;for(o=o.split(/[\\\/]/),d=o.pop(),"."!==d&&".."!==d||(o.push(d),d="");null!=(c=o.shift());)if(c&&"."!==c&&(".."===c?(t=n.pop(),u=u.slice(0,u.lastIndexOf("/"))):(n.push(t),t=t[c],u+="/"+c),!t))throw s(r);if(d&&"function"!=typeof t[d]&&(m=a(t,d,".js"),m||(m=a(t,d,".json")),m||(m=a(t,d,".css")),m||(m=a(t,d,".html")),m?d=m:2!==l&&"object"==typeof t[d]&&(n.push(t),t=t[d],u+="/"+d,d="")),!d)return 1!==l&&t[":mainpath:"]?e(t,n,t[":mainpath:"],r,1,u):e(t,n,"index",r,2,u);if(p=t[d],!p)throw s(r);return p.hasOwnProperty("module")?p.module.exports:(h={},p.module=f={exports:h,id:u+"/"+d},p.call(h,h,f,i(t,n,u)),f.exports)},n=function(i,n,a,o){var l,u=a,d=a.charAt(0),c=0;if("/"===d){if(u=u.slice(1),i=t["/"],!i){if(r)return r(a);throw s(a)}o="/",n=[]}else if("."!==d){if(l=u.split("/",1)[0],i=t[l],!i){if(r)return r(a);throw s(a)}o=l,n=[],u=u.slice(l.length+1),u||(u=i[":mainpath:"],u?c=1:(u="index",c=2))}return e(i,n,u,a,c,o)},(i=function(t,e,i){return function(s){return n(t,[].concat(e),s,i)}})(t,[],"")}({"testcafe-phoenix":{src:{client:{ui:{cursor:{"iframe-cursor.js":function(t,i,n){function s(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0;var a=n("../deps/hammerhead"),o=s(a),r=n("../deps/testcafe-core"),l=n("./messages"),u=s(l),d=o["default"].utils.browser,c=d.isIE?1:0;t["default"]={move:function(t,i){var n={cmd:u["default"].moveRequest,x:t+c,y:i+c};return(0,r.sendRequestToFrame)(n,u["default"].moveResponse,e.parent)},leftButtonDown:function(){return(0,r.sendRequestToFrame)({cmd:u["default"].leftButtonDownRequest},u["default"].leftButtonDownResponse,e.parent)},rightButtonDown:function(){return(0,r.sendRequestToFrame)({cmd:u["default"].rightButtonDownRequest},u["default"].rightButtonDownResponse,e.parent)},buttonUp:function(){return(0,r.sendRequestToFrame)({cmd:u["default"].buttonUpRequest},u["default"].buttonUpResponse,e.parent)}},i.exports=t["default"]},"index.js":function(t,e,n){function s(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0;var a=n("./../deps/hammerhead"),o=s(a),r=n("./../deps/testcafe-core"),l=s(r),u=n("../ui-root"),d=s(u),c=n("./messages"),h=s(c),f=o["default"].Promise,p=o["default"].shadowUI,m=o["default"].utils.browser,g=o["default"].utils.featureDetection,v=o["default"].eventSandbox.message,y=l["default"].styleUtils,_=l["default"].positionUtils,w="cursor",E="touch",C="l-mouse-down",x="r-mouse-down",b=[C,x].join(" ");v.on(v.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;switch(e.cmd){case h["default"].moveRequest:var i=_.getIframePointRelativeToParentFrame({x:e.x,y:e.y},t.source);S.move(i.x,i.y).then(function(){return v.sendServiceMsg({cmd:h["default"].moveResponse},t.source)});break;case h["default"].leftButtonDownRequest:S.leftButtonDown().then(function(){return v.sendServiceMsg({cmd:h["default"].leftButtonDownResponse},t.source)});break;case h["default"].rightButtonDownRequest:S.rightButtonDown().then(function(){return v.sendServiceMsg({cmd:h["default"].rightButtonDownResponse},t.source)});break;case h["default"].buttonUpRequest:S.buttonUp().then(function(){return v.sendServiceMsg({cmd:h["default"].buttonUpResponse},t.source)})}});var S={cursorElement:null,x:50,y:50,pointerOffsetX:0,pointerOffsetY:0,_createElement:function(){this.cursorElement=i.createElement("div"),p.addClass(this.cursorElement,w),g.isTouchDevice&&!m.isIE&&(p.addClass(this.cursorElement,E),this.pointerOffsetX=Math.ceil(y.getWidth(this.cursorElement)/2),this.pointerOffsetY=Math.ceil(y.getHeight(this.cursorElement)/2)),d["default"].element().appendChild(this.cursorElement)},isVisible:function(){return this.cursorElement&&"hidden"!==y.get(this.cursorElement,"visibility")},hide:function(){this.cursorElement||this._createElement(),y.set(this.cursorElement,"visibility","hidden")},show:function(){this.cursorElement||this._createElement(),y.set(this.cursorElement,"visibility","")},move:function(t,e){return this.x=t,this.y=e,this.cursorElement||this._createElement(),y.set(this.cursorElement,{left:this.x-this.pointerOffsetX+"px",top:this.y-this.pointerOffsetY+"px"}),f.resolve()},leftButtonDown:function(){return this.cursorElement||this._createElement(),p.removeClass(this.cursorElement,b),p.addClass(this.cursorElement,C),f.resolve()},rightButtonDown:function(){return this.cursorElement||this._createElement(),p.removeClass(this.cursorElement,b),p.addClass(this.cursorElement,x),f.resolve()},buttonUp:function(){return this.cursorElement||this._createElement(),p.removeClass(this.cursorElement,b),f.resolve()}};t["default"]=S,e.exports=t["default"]},"messages.js":function(t,e,i){t.__esModule=!0,t["default"]={moveRequest:"ui|cursor|move|request",leftButtonDownRequest:"ui|cursor|leftbuttondown|request",rightButtonDownRequest:"ui|cursor|rightbuttondown|request",buttonUpRequest:"ui|cursor|buttonup|request",moveResponse:"ui|cursor|move|response",leftButtonDownResponse:"ui|cursor|leftbuttondown|response",rightButtonDownResponse:"ui|cursor|rightbuttondown|response",buttonUpResponse:"ui|cursor|buttonup|response"},e.exports=t["default"]}},deps:{"hammerhead.js":function(t,i,n){t.__esModule=!0,t["default"]=e["%hammerhead%"],i.exports=t["default"]},"testcafe-core.js":function(t,i,n){t.__esModule=!0,t["default"]=e["%testCafeCore%"],i.exports=t["default"]}},"index.js":function(i,n,s){function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}var r=s("./deps/hammerhead"),l=o(r),u=s("./deps/testcafe-core"),d=o(u),c=s("./select-element"),h=a(c),f=s("./modal-background"),p=a(f),m=s("./progress-panel"),g=o(m),v=s("./status-bar"),y=o(v),_=s("./status-bar/iframe-status-bar"),w=o(_),E=s("./cursor"),C=o(E),x=s("./cursor/iframe-cursor"),b=a(x),S=s("./screenshot-mark"),I=o(S),M=s("./ui-root"),B=o(M),R=l["default"].Promise,T=l["default"].eventSandbox.message,A=d["default"].sendRequestToFrame,D="ui|hide|request",U="ui|hide|response",V="ui|show|request",W="ui|show|response";T.on(T.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===D?(B["default"].hide(),T.sendServiceMsg({cmd:U},t.source)):t.message.cmd===V&&(B["default"].show(),T.sendServiceMsg({cmd:W},t.source))}),i.cursorUI=C["default"],i.iframeCursorUI=b,i.selectElement=h,i.modalBackground=p,i.ProgressPanel=g["default"],i.StatusBar=y["default"],i.IframeStatusBar=w["default"],i.get=s,i.hide=function(t){return t?A({cmd:D},U,e.top):(B["default"].hide(),R.resolve())},i.show=function(t){return t?A({cmd:V},W,e.top):(B["default"].show(),R.resolve())},i.showScreenshotMark=function(t){return I["default"].show(t)},i.hideScreenshotMark=function(){return I["default"].hide()},l["default"].nativeMethods.objectDefineProperty.call(e,e,"%testCafeUI%",{configurable:!0,value:i}),l["default"].on(l["default"].EVENTS.evalIframeScript,function(e){return t(e.iframe.contentWindow,!0)})},"modal-background.js":function(t,n,s){function a(t){return t&&t.__esModule?t:{"default":t}}function o(){var t=y["default"].element();S=i.createElement("div"),t.appendChild(S),m.shadowUI.addClass(S,w),I=i.createElement("div"),I.textContent=_,t.appendChild(I),m.shadowUI.addClass(I,E),M=i.createElement("div"),g.styleUtils.set(M,"visibility","hidden"),t.appendChild(M),m.shadowUI.addClass(M,b)}function r(){var t=g.styleUtils.getHeight(e),i=g.styleUtils.getWidth(e),n=!g.styleUtils.hasDimensions(I);n&&(g.styleUtils.set(I,"visibility","hidden"),g.styleUtils.set(I,"display","block")),g.styleUtils.set(I,{left:Math.max((i-g.styleUtils.getWidth(I))/2,0)+"px",top:Math.max((t-g.styleUtils.getHeight(I))/2,0)+"px"}),n&&(g.styleUtils.set(I,"display","none"),g.styleUtils.set(I,"visibility",""))}function l(){var t=function(){var t=g.styleUtils.getHeight(e),i=g.styleUtils.getWidth(e);g.styleUtils.set(S,"width",i+"px"),g.styleUtils.set(S,"height",t+"px"),g.styleUtils.set(M,{left:Math.round((i-g.styleUtils.getWidth(M))/2)+"px",top:Math.round((t-g.styleUtils.getHeight(M))/2)+"px"})};t(),g.eventUtils.bind(e,"resize",t)}function u(){o(),l(),r(),B=!0}function d(){var t=!1,n=function(){u(),g.styleUtils.set(S,"opacity",x),g.styleUtils.set(S,"display","block"),g.styleUtils.set(I,"display","block"),t=!0},s=function a(){t||(i.body?n():m.nativeMethods.setTimeout.call(e,a,0))};s(),g.eventUtils.documentReady().then(function(){t||n()})}function c(t){B||u(),g.styleUtils.set(S,"opacity",t?0:C),g.styleUtils.set(S,"display","block")}function h(){B&&(g.styleUtils.set(I,"display","none"),g.styleUtils.set(S,"display","none"))}function f(){g.styleUtils.set(M,"visibility","visible")}function p(){g.styleUtils.set(M,"visibility","hidden")}t.__esModule=!0,t.initAndShowLoadingText=d,t.show=c,t.hide=h,t.showLoadingIcon=f,t.hideLoadingIcon=p;var m=s("./deps/hammerhead"),g=s("./deps/testcafe-core"),v=s("./ui-root"),y=a(v),_="Loading page...",w="modal-background",E="loading-text",C=.7,x=.8,b="loading-icon",S=null,I=null,M=null,B=!1},"progress-panel":{"index.js":function(t,n,s){function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=s("../deps/hammerhead"),l=a(r),u=s("../deps/testcafe-core"),d=a(u),c=s("./progress-bar"),h=a(c),f=s("../ui-root"),p=a(f),m=l["default"].shadowUI,g=l["default"].nativeMethods,v=d["default"].eventUtils,y=d["default"].styleUtils,_="progress-panel",w="title",E="content",C=100,x=10,b=300,S=200,I=600,M=1e3,B=function(){function t(){var e=this;o(this,t),this.startTime=null,this.openingTimeout=null,this.updateInterval=null,this.animationInterval=null,this.panelDiv=i.createElement("div"),p["default"].element().appendChild(this.panelDiv),this.titleDiv=i.createElement("div"),this.panelDiv.appendChild(this.titleDiv),this.contentDiv=i.createElement("div"),this.panelDiv.appendChild(this.contentDiv),m.addClass(this.panelDiv,_),m.addClass(this.titleDiv,w),m.addClass(this.contentDiv,E),t._showAtWindowCenter(this.panelDiv),this.progressBar=new h["default"](this.contentDiv),this.disposePanel=function(){return t._showAtWindowCenter(e.panelDiv)}}return t._getInvisibleElementProperty=function(t,e){var i="none"===y.get(t,"display");i&&y.set(t,"display","block");var n=t[e];return i&&y.set(t,"display","none"),n},t._showAtWindowCenter=function(i){var n=t._getInvisibleElementProperty(i,"offsetHeight"),s=t._getInvisibleElementProperty(i,"offsetWidth"),a=Math.round(y.getHeight(e)/2-n/2),o=Math.round(y.getWidth(e)/2-s/2);y.set(i,{left:o+"px",top:a+"px"})},t.prototype._setCurrentProgress=function(){var t=Math.round((Date.now()-this.startTime)/this.maxTimeout*100);this.progressBar.setValue(t)},t.prototype._setSuccess=function(t){this.progressBar.setSuccess(t)},t.prototype._stopAnimation=function(){g.clearInterval.call(e,this.animationInterval)},t.prototype._animate=function(t,i,n,s){var a=this,o=Date.now(),r=n?0:1,l=0,u=0,d=0;n&&(y.set(t,"opacity",r),y.set(t,"display","block")),this._stopAnimation(),this.animationInterval=g.setInterval.call(e,function(){l=Date.now()-o,u=Math.min(l/i,1),d=.5-Math.cos(u*Math.PI)/2,y.set(t,"opacity",r+(n?d:-d)),1===u&&(a._stopAnimation(),s&&s())},x)},t.prototype._showPanel=function(){v.bind(e,"resize",this.disposePanel),this._animate(this.panelDiv,S,!0)},t.prototype._hidePanel=function(t){var i=this;this.startTime=null,v.unbind(e,"resize",this.disposePanel),this._animate(this.panelDiv,t?0:I,!1,function(){return y.set(i.panelDiv,"display","none")})},t.prototype.show=function(t,i){var n=this;this.startTime=Date.now(),this.maxTimeout=i,this.titleDiv.textContent=t,this._setSuccess(!1),this.openingTimeout=g.setTimeout.call(e,function(){n.openingTimeout=null,n._setCurrentProgress(),n._showPanel(),n.updateInterval=g.setInterval.call(e,function(){return n._setCurrentProgress()},C)},b)},t.prototype.close=function(t){var i=this;t&&this._setSuccess(!0),this.openingTimeout&&(g.clearTimeout.call(e,this.openingTimeout),this.openingTimeout=null),this.updateInterval&&(g.clearInterval.call(e,this.updateInterval),this.updateInterval=null),t?this.startTime&&Date.now()-this.startTime<M?g.setTimeout.call(e,function(){g.setTimeout.call(e,function(){return i._hidePanel(!1)},S)},C):g.setTimeout.call(e,function(){return i._hidePanel(!1)},S):this._hidePanel(!0)},t}();t["default"]=B,n.exports=t["default"]},"progress-bar.js":function(t,e,n){function s(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n("../deps/hammerhead"),r=s(o),l=n("../deps/testcafe-core"),u=s(l),d=r["default"].shadowUI,c=u["default"].styleUtils,h="progress-bar",f="value",p="success",m=function(){function t(e){a(this,t),this.containerElement=i.createElement("div"),this.valueElement=i.createElement("div"),e.appendChild(this.containerElement),this.containerElement.appendChild(this.valueElement),d.addClass(this.containerElement,h),d.addClass(this.valueElement,f)}return t.prototype.setValue=function(t){t="number"!=typeof t?0:Math.min(Math.max(t,0),100),c.set(this.valueElement,"width",t+"%")},t.prototype.setSuccess=function(t){t?d.addClass(this.containerElement,p):d.removeClass(this.containerElement,p)},t}();t["default"]=m,e.exports=t["default"]}},"screenshot-mark.js":function(t,n,s){t.__esModule=!0;var a=s("./deps/hammerhead"),o=s("../../screenshots/constants");t["default"]={screenshotMark:null,_createMark:function(){this.screenshotMark=i.createElement("img"),a.shadowUI.addClass(this.screenshotMark,"screenshot-mark"),this.screenshotMark.style.right=o.MARK_RIGHT_MARGIN/e.devicePixelRatio+"px",this.screenshotMark.style.width=o.MARK_LENGTH/e.devicePixelRatio+"px",this.screenshotMark.style.height=o.MARK_HEIGHT/e.devicePixelRatio+"px",this.hide(),a.shadowUI.getRoot().appendChild(this.screenshotMark)},hide:function(){this.screenshotMark&&(this.screenshotMark.style.visibility="hidden")},show:function(t){this.screenshotMark||this._createMark(),a.nativeMethods.imageSrcSetter.call(this.screenshotMark,t),this.screenshotMark.style.visibility=""}},n.exports=t["default"]},"select-element.js":function(t,n,s){function a(t){return t&&t.__esModule?t:{"default":t}}function o(t){(t.target||t.srcElement)===F||U.containsElement(F,t.target)||U.containsElement(L,t.target)||f()}function r(t,e,i){var n=P.indexOf(z,t.target);if(!(n<0)){i();var s=t.target.className.indexOf(j)>-1;s&&M.isWebKit||l(n,s)}}function l(t,e){var i=F.selectedIndex,n=F.getElementsByTagName("option")[t],s=!e&&t!==i;s&&!M.isIE&&(F.selectedIndex=t),M.isFirefox||M.isIE||!s||(T.input(F),T.change(F)),(M.isFirefox||M.isIE)&&T.mousedown(M.isFirefox?n:F),B.isTouchDevice||T.mouseup(M.isFirefox?n:F),(M.isFirefox||M.isIE)&&s&&(M.isIE&&(F.selectedIndex=t),M.isIE||T.input(F),T.change(F)),B.isTouchDevice||T.click(M.isFirefox||M.isIE?n:F),e||f()}function u(t,e){var n=i.createElement("div"),s=t.disabled||"optgroup"===U.getTagName(t.parentElement)&&t.parentElement.disabled;n.textContent=t.text,e.appendChild(n),I.addClass(n,N),s&&(I.addClass(n,j),V.set(n,"color",V.get(t,"color"))),z.push(n)}function d(t,e){var n=i.createElement("div");n.textContent=t.label||" ",e.appendChild(n),I.addClass(n,O),n.disabled&&(I.addClass(n,j),V.set(n,"color",V.get(t,"color"))),c(t.children,n),H.push(n)}function c(t,e){for(var i=U.getChildrenLength(t),n=0;n<i;n++)U.isOptionElement(t[n])?u(t[n],e):"optgroup"===U.getTagName(t[n])&&d(t[n],e)}function h(t){var n=t.children;if(n.length){if(F){var s=t===F;if(f(),s)return}F=t,L=i.createElement("div"),S["default"].element().appendChild(L),I.addClass(L,k),c(n,L),A.addInternalEventListener(e,["click"],r),R.setTimeout.call(e,function(){W.bind(i,"mousedown",o)},0),V.set(L,{position:"absolute",fontSize:V.get(F,"fontSize"),fontFamily:V.get(F,"fontFamily"),minWidth:V.getWidth(F)+"px",left:D.getOffsetPosition(F).left+"px",height:U.getSelectVisibleChildren(t).length>q?V.getOptionHeight(t)*q:""});var a=D.getOffsetPosition(F).top,l=V.getHeight(L),u=a+V.getHeight(F)+2;if(u+l>V.getScrollTop(e)+V.getHeight(e)){var d=a-3-l;d>=V.getScrollTop(e)&&(u=d)}V.set(L,"top",u+"px")}}function f(){U.remove(L),W.unbind(i,"mousedown",o),L=null,F=null,z=[],H=[]}function p(t){return t?t===F:!!F}function m(t){var e="optgroup"===U.getTagName(t),i=e?U.getElementIndexInParent(F,t):U.getElementIndexInParent(F,t);return e?H[i]:z[i]}function g(t){var e=U.getSelectParent(t);if(e){var i=V.getSelectElementSize(e),n=V.getOptionHeight(e),s=0,a=Math.max(V.getScrollTop(e)/n,0),o=a+i-1,r=U.getChildVisibleIndex(e,t);r<a?(s=n*(a-r),V.setScrollTop(e,Math.max(V.getScrollTop(e)-s,0))):r>o&&(s=n*(r-o),V.setScrollTop(e,V.getScrollTop(e)+s))}}function v(t){var e=U.getSelectParent(t);if(!e)return{x:0,y:0};var i=V.getOptionHeight(e),n=D.getElementRectangle(t);return{x:Math.round(n.left+n.width/2),y:Math.round(n.top+i/2)}}function y(t,e){var i=V.getSelectElementSize(t),n=!V.hasDimensions(I.select("."+k)[0]);if(/down|up/.test(e)||!M.isIE&&(i<=1||M.isFirefox)&&(n||M.isFirefox)&&/left|right/.test(e)){for(var s=t.querySelectorAll("option"),a=[],o=0;o<s.length;o++){var r=s[o].parentElement;s[o].disabled||"optgroup"===U.getTagName(r)&&r.disabled||a.push(s[o])}var l=P.indexOf(a,s[t.selectedIndex]),u=l+(/down|right/.test(e)?1:-1);u>=0&&u<a.length&&(t.selectedIndex=P.indexOf(s,a[u]),M.isIE||T.input(t),T.change(t))}}function _(t){var e=U.getSelectParent(t);if(!e)return!0;var i=p(e),n=V.getSelectElementSize(e);return i||n>1}t.__esModule=!0,t.expandOptionList=h,t.collapseOptionList=f,t.isOptionListExpanded=p,t.getEmulatedChildElement=m,t.scrollOptionListByChild=g,t.getSelectChildCenter=v,t.switchOptionsByKeys=y,t.isOptionElementVisible=_;var w=s("./deps/hammerhead"),E=a(w),C=s("./deps/testcafe-core"),x=a(C),b=s("./ui-root"),S=a(b),I=E["default"].shadowUI,M=E["default"].utils.browser,B=E["default"].utils.featureDetection,R=E["default"].nativeMethods,T=E["default"].eventSandbox.eventSimulator,A=E["default"].eventSandbox.listeners,D=x["default"].positionUtils,U=x["default"].domUtils,V=x["default"].styleUtils,W=x["default"].eventUtils,P=x["default"].arrayUtils,k="tcOptionList",O="tcOptionGroup",N="tcOption",j="disabled",q=M.isIE?30:20,F=null,L=null,H=[],z=[]},"status-bar":{"iframe-status-bar.js":function(t,i,n){function s(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("./../deps/hammerhead"),u=s(l),d=n("./../deps/testcafe-core"),c=s(d),h=n("./messages"),f=s(h),p=n("./index"),m=s(p),g=c["default"].sendRequestToFrame,v=u["default"].eventSandbox.message,y=function(t){function i(){return a(this,i),o(this,t.call(this))}return r(i,t),i.prototype.showWaitingElementStatus=function(t){v.sendServiceMsg({cmd:f["default"].startWaitingElement,timeout:t},e.top)},i.prototype.hideWaitingElementStatus=function(t){var i={cmd:f["default"].endWaitingElementRequest,waitingSuccess:t};return g(i,f["default"].endWaitingElementResponse,e.top)},i.prototype.showWaitingAssertionRetriesStatus=function(t){v.sendServiceMsg({cmd:f["default"].startWaitingAssertionRetries,timeout:t},e.top)},i.prototype.hideWaitingAssertionRetriesStatus=function(t){var i={cmd:f["default"].endWaitingAssertionRetriesRequest,waitingSuccess:t};return g(i,f["default"].endWaitingAssertionRetriesResponse,e.top)},i}(m["default"]);t["default"]=y,i.exports=t["default"]},"index.js":function(t,n,s){function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var u=s("./../deps/hammerhead"),d=a(u),c=s("./../deps/testcafe-core"),h=a(c),f=s("./progress-bar"),p=a(f),m=s("../ui-root"),g=a(m),v=s("./messages"),y=a(v),_=d["default"].Promise,w=d["default"].shadowUI,E=d["default"].nativeMethods,C=d["default"].eventSandbox.message,x=d["default"].utils.browser,b=d["default"].utils.featureDetection,S=d["default"].eventSandbox.listeners,I=h["default"].styleUtils,M=h["default"].eventUtils,B=h["default"].domUtils,R=h["default"].serviceUtils,T=h["default"].arrayUtils,A="status-bar",D="container",U="icon",V="info-container",W="fixture-container",P="fixture",k="user-agent",O="status-container",N="unlock-page-area",j="unlock-page-container",q="unlock-icon",F="icon-separator",L="locked",H="unlocked",z="buttons",G="button-icon",K="resume",Y="step",X="status",J="waiting-element-failed",Q="waiting-element-success",Z="Loading Web Page...",$="Waiting for an element to appear...",tt="Waiting for an assertion execution...",et="Debugging test...",it="Test failed",nt="Unlock page",st="Page unlocked",at=300,ot=500,rt=10,lt={all:{name:"show-all-elements"},hideFixture:{name:"hide-fixture",maxSize:940,className:"icon-status-view"},hideStatus:{name:"hide-status",maxSize:380,className:"icon-unlock-buttons-view"},hideStatusDebugging:{name:"hide-status-debugging",maxSize:740,className:"icon-unlock-buttons-view"},hideUnlockArea:{name:"hide-unlock-area",maxSize:460,className:"icon-buttons-view"},onlyButtons:{name:"show-buttons-only",maxSize:330,className:"only-buttons-view"},onlyIcon:{name:"show-icon-only",maxSize:330,className:"only-icon-view"}},ut=function(t){function n(i,s,a){o(this,n);var l=r(this,t.call(this));return l.UNLOCK_PAGE_BTN_CLICK="testcafe|ui|status-bar|unlock-page-btn-click",l.userAgent=i,l.fixtureName=s,l.testName=a,l.statusBar=null,l.container=null,l.infoContainer=null,l.icon=null,l.fixtureContainer=null,l.resumeButton=null,l.finishButton=null,l.stepButton=null,l.statusDiv=null,l.buttons=null,l.progressBar=null,l.animationInterval=null,l.showingTimeout=null,l.windowHeight=I.getHeight(e),l.state={created:!1,showing:!1,hiding:!1,debugging:!1,waiting:!1,assertionRetries:!1,hidden:!1},l.currentView=null,l._createBeforeReady(),l._initChildListening(),l}return l(n,t),n.prototype._createFixtureArea=function(){this.infoContainer=i.createElement("div"),w.addClass(this.infoContainer,V),w.addClass(this.infoContainer,V),this.container.appendChild(this.infoContainer),this.icon=i.createElement("div"),w.addClass(this.icon,U),this.infoContainer.appendChild(this.icon),this.fixtureContainer=i.createElement("div"),w.addClass(this.fixtureContainer,W),this.infoContainer.appendChild(this.fixtureContainer);var t=i.createElement("div");t.textContent=this.fixtureName+" - "+this.testName,w.addClass(t,P),this.fixtureContainer.appendChild(t);var e=i.createElement("div");e.textContent=this.userAgent,w.addClass(e,k),this.fixtureContainer.appendChild(e)},n.prototype._createUnlockPageArea=function(t){var e=this,n=i.createElement("div"),s=i.createElement("div"),a=i.createElement("div"),o=i.createElement("div"),r=i.createElement("span");return r.textContent=nt,w.addClass(n,N),w.addClass(s,j),w.addClass(s,L),w.addClass(a,q),w.addClass(o,F),x.isMacPlatform&&(s.style.paddingTop="3px",s.style.height="24px",x.isFirefox&&(r.style.lineHeight="30px")),t.appendChild(n),n.appendChild(s),s.appendChild(a),s.appendChild(r),s.appendChild(o),this._bindClickOnce([s],function(){w.removeClass(s,L),w.addClass(s,H),r.textContent=st,e.emit(e.UNLOCK_PAGE_BTN_CLICK,{})}),n.style.display="none",n},n.prototype._createStatusArea=function(){var t=i.createElement("div");w.addClass(t,O),this.container.appendChild(t),this.statusDiv=i.createElement("div"),this.statusDiv.textContent=Z,w.addClass(this.statusDiv,X),x.isMacPlatform&&(this.statusDiv.style.marginTop="9px"),t.appendChild(this.statusDiv),this.unlockPageArea=this._createUnlockPageArea(t),this.buttons=i.createElement("div"),w.addClass(this.buttons,z),t.appendChild(this.buttons),this.resumeButton=this._createButton("Resume",K),this.stepButton=this._createButton("Next Step",Y),this.finishButton=this._createButton("Finish",K),this.buttons.appendChild(this.resumeButton),this.buttons.appendChild(this.stepButton),this.buttons.style.display="none"},n.prototype._createButton=function(t,e){var n=i.createElement("div"),s=i.createElement("div"),a=i.createElement("span");return a.textContent=t,w.addClass(n,"button"),w.addClass(n,e),w.addClass(s,G),x.isSafari&&(a.style.position="relative",a.style.top="1px"),n.appendChild(s),n.appendChild(a),n},n.prototype._create=function(){this.statusBar=i.createElement("div"),this.container=i.createElement("div"),w.addClass(this.statusBar,A),w.addClass(this.container,D),this.statusBar.appendChild(this.container),this._createFixtureArea(),this._createStatusArea(),this.progressBar=new p["default"](this.statusBar),this.progressBar.indeterminateIndicator.start(),this.progressBar.show(),g["default"].element().appendChild(this.statusBar),this._recalculateSizes(),this._bindHandlers(),this.state.created=!0},n.prototype._createBeforeReady=function(){var t=this;this.state.created||e!==e.top||(i.body?this._create():E.setTimeout.call(e,function(){return t._createBeforeReady()},0))},n.prototype._switchView=function(t){this.currentView&&this.currentView.name===t.name||(this.currentView&&this.currentView.className&&w.removeClass(this.statusBar,this.currentView.className),t.className&&w.addClass(this.statusBar,t.className),this.currentView=t)},n.prototype._calculateActualView=function(t){var e=this.state.debugging?lt.hideStatusDebugging.maxSize:lt.hideStatus.maxSize;return t>=lt.hideFixture.maxSize?lt.all:t<lt.hideFixture.maxSize&&t>=e?lt.hideFixture:this.state.debugging?t<e&&t>=lt.hideUnlockArea.maxSize?lt.hideStatus:t<lt.hideUnlockArea.maxSize&&t>=lt.onlyButtons.maxSize?lt.hideUnlockArea:lt.onlyButtons:lt.onlyIcon},n.prototype._setFixtureContainerWidth=function(){if("none"!==I.get(this.fixtureContainer,"display")){var t=I.getWidth(this.infoContainer),e=I.getWidth(this.icon),i=I.getElementMargin(this.icon),n=t-e-i.left-i.right-1;I.set(this.fixtureContainer,"width",n+"px")}},n.prototype._setStatusDivLeftMargin=function(){if(this.statusDiv.parentNode&&"none"!==I.get(this.statusDiv.parentNode,"display")){var t="none"===I.get(this.statusDiv,"display"),e=I.getWidth(this.infoContainer),i=I.getWidth(this.container),n=t?0:I.getWidth(this.statusDiv),s=i/2-n/2-e;this.state.debugging&&(s-=I.getWidth(this.buttons)/2,s-=I.getWidth(this.unlockPageArea)/2);var a=Math.max(Math.round(s),0)+"px";I.set(this.statusDiv,"marginLeft",t?0:a),I.set(this.statusDiv.parentNode,"marginLeft",t?a:0)}},n.prototype._recalculateSizes=function(){var t=I.getWidth(e);this.windowHeight=I.getHeight(e),I.set(this.statusBar,"width",t+"px"),this._switchView(this._calculateActualView(t)),this._setFixtureContainerWidth(),this._setStatusDivLeftMargin()},n.prototype._animate=function(t){var i=this,n=Date.now(),s=parseInt(I.get(this.statusBar,"opacity"),10)||0,a=0,o=0,r=0;this._stopAnimation(),t&&(I.set(this.statusBar,"visibility",""),this.state.hidden=!1),this.animationInterval=E.setInterval.call(e,function(){a=Date.now()-n,o=Math.min(a/ot,1),r=.5-Math.cos(o*Math.PI)/2,I.set(i.statusBar,"opacity",s+(t?r:-r)),1===o&&(i._stopAnimation(),t||(I.set(i.statusBar,"visibility","hidden"),i.state.hidden=!0),i.state.showing=!1,i.state.hiding=!1)},rt)},n.prototype._stopAnimation=function(){this.animationInterval&&(E.clearInterval.call(e,this.animationInterval),this.animationInterval=null)},n.prototype._fadeOut=function(){this.state.hiding||this.state.debugging||(this.state.showing=!1,this.state.hiding=!0,this._animate())},n.prototype._fadeIn=function(){this.state.showing||this.state.debugging||(this.state.hiding=!1,this.state.showing=!0,this._animate(!0))},n.prototype._bindHandlers=function(){var t=this;S.initElementListening(e,["resize"]),S.addInternalEventListener(e,["resize"],function(){return t._recalculateSizes()});var i=I.getHeight(this.statusBar);S.addFirstInternalHandler(e,["mousemove","mouseout"],function(e){"mouseout"!==e.type||e.relatedTarget?"mousemove"===e.type&&(e.clientY>t.windowHeight-i?t._fadeOut(e):t.state.hidden&&t._fadeIn(e)):t._fadeIn(e)})},n.prototype._bindClickOnce=function(t,i){var n=this,s=b.isTouchDevice?"touchstart":"mousedown",a=function o(a){var r=!!T.find(t,function(t){return B.containsElement(t,a.target)});r?(M.preventDefault(a),S.removeInternalEventListener(e,[s],o),i(a)):B.containsElement(n.statusBar,a.target)&&M.preventDefault(a)};S.addInternalEventListener(e,[s],a)},n.prototype._initChildListening=function(){var t=this;C.on(C.SERVICE_MSG_RECEIVED_EVENT,function(e){var i=e.message;i.cmd===y["default"].startWaitingElement?t.showWaitingElementStatus(i.timeout):i.cmd===y["default"].endWaitingElementRequest?t.hideWaitingElementStatus(i.waitingSuccess).then(function(){return C.sendServiceMsg({cmd:y["default"].endWaitingElementResponse},e.source)}):i.cmd===y["default"].startWaitingAssertionRetries?t.showWaitingAssertionRetriesStatus(i.timeout):i.cmd===y["default"].endWaitingAssertionRetriesRequest&&t.hideWaitingAssertionRetriesStatus(i.waitingSuccess).then(function(){return C.sendServiceMsg({cmd:y["default"].endWaitingAssertionRetriesResponse},e.source)})})},n.prototype._resetState=function(){this.state.debugging=!1,this.buttons.style.display="none",this.unlockPageArea.style.display="none",this.statusDiv.textContent="",this.progressBar.hide()},n.prototype._showWaitingStatus=function(){this.statusDiv.textContent=this.state.assertionRetries?tt:$,this._setStatusDivLeftMargin(),this.progressBar.show()},n.prototype._hideWaitingStatus=function(t){var i=this;return new _(function(n){E.setTimeout.call(e,function(){return i.state.waiting||i.state.debugging?void n():(w.removeClass(i.statusBar,Q),w.removeClass(i.statusBar,J),i.progressBar.determinateIndicator.reset(),i._resetState(),void n())},t?0:ot)})},n.prototype._showDebuggingStatus=function(t){var e=this;return new _(function(i){e.state.debugging=!0,t?(e.buttons.removeChild(e.stepButton),e.buttons.removeChild(e.resumeButton),e.buttons.appendChild(e.finishButton),e.statusDiv.textContent=it,w.removeClass(e.statusBar,Q),w.addClass(e.statusBar,J)):e.statusDiv.textContent=et,e.buttons.style.display="",e.unlockPageArea.style.display="",e._recalculateSizes(),e._bindClickOnce([e.resumeButton,e.stepButton,e.finishButton],function(t){var n=B.containsElement(e.stepButton,t.target);e._resetState(),i(n)})})},n.prototype._setWaitingStatus=function(t,i){var n=this;this.state.waiting=!0,this.progressBar.determinateIndicator.start(t,i),this.showingTimeout=E.setTimeout.call(e,function(){n.showingTimeout=null,n._showWaitingStatus()},at)},n.prototype._resetWaitingStatus=function(t){this.state.waiting=!1,this.progressBar.determinateIndicator.stop(),t?w.addClass(this.statusBar,Q):w.addClass(this.statusBar,J);var i=this.showingTimeout&&t;return this.showingTimeout&&(E.clearTimeout.call(e,this.showingTimeout),this.showingTimeout=null,t||this._showWaitingStatus()),this._hideWaitingStatus(i)},n.prototype.hidePageLoadingStatus=function(){this.state.created||this._create(),this.progressBar.indeterminateIndicator.stop(),this._resetState()},n.prototype.showDebuggingStatus=function(t){
return this._stopAnimation(),I.set(this.statusBar,"opacity",1),I.set(this.statusBar,"visibility",""),this.state.hiden=!1,this._showDebuggingStatus(t)},n.prototype.showWaitingElementStatus=function(t){this.state.assertionRetries||this._setWaitingStatus(t)},n.prototype.hideWaitingElementStatus=function(t){return this.state.assertionRetries?_.resolve():this._resetWaitingStatus(t)},n.prototype.showWaitingAssertionRetriesStatus=function(t,e){this.state.assertionRetries=!0,this._setWaitingStatus(t,e)},n.prototype.hideWaitingAssertionRetriesStatus=function(t){var e=this;return this._resetWaitingStatus(t).then(function(){e.state.assertionRetries=!1})},n}(R.EventEmitter);t["default"]=ut,n.exports=t["default"]},"messages.js":function(t,e,i){t.__esModule=!0,t["default"]={startWaitingElement:"start-waiting-element",endWaitingElementRequest:"end-waiting-element-request",endWaitingElementResponse:"end-waiting-element-response",startWaitingAssertionRetries:"start-waiting-assertion-retries",endWaitingAssertionRetriesRequest:"end-waiting-assertion-retries-request",endWaitingAssertionRetriesResponse:"end-waiting-assertion-retries-response"},e.exports=t["default"]},"progress-bar":{"determinate-indicator.js":function(t,i,n){function s(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n("../../deps/hammerhead"),r=s(o),l=n("../../deps/testcafe-core"),u=s(l),d=r["default"].shadowUI,c=r["default"].nativeMethods,h=u["default"].styleUtils,f="determinate",p=10,m=function(){function t(e,i){a(this,t),this.progressBar=e,this.firstValueElement=i,this.maxTimeout=null,this.startTime=null,this.animationInterval=null}return t.prototype._setCurrentProgress=function(){var t=(Date.now()-this.startTime)/this.maxTimeout,e=Math.min(Math.max(t,0),1),i=h.getWidth(this.progressBar),n=Math.round(i*e);h.set(this.firstValueElement,"width",n+"px")},t.prototype.start=function(t,i){var n=this;d.addClass(this.progressBar,f),this.maxTimeout=t,this.startTime=i||Date.now(),this._setCurrentProgress(),this.animationInterval=c.setInterval.call(e,function(){return n._setCurrentProgress()},p)},t.prototype.stop=function(){this.animationInterval&&(c.clearInterval.call(e,this.animationInterval),this.animationInterval=null)},t.prototype.reset=function(){h.set(this.firstValueElement,"width",0),d.removeClass(this.progressBar,f)},t}();t["default"]=m,i.exports=t["default"]},"indeterminate-indicator.js":function(t,i,n){function s(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,i){return 3*Math.pow(1-t,2)*t*e+3*(1-t)*t*t*i+t*t*t}function r(t,e){var i=t<E.middle,n=i?E.start:E.middle,s=i?E.middle:E.end,a=e[n],o=e[s],r={x:n,y:a.left},l={x:s,y:o.left},u=m.getLineYByXCoord(r,l,t);r={x:n,y:a.right},l={x:s,y:o.right};var d=m.getLineYByXCoord(r,l,t);return{left:u,right:d}}t.__esModule=!0;var l=n("../../deps/hammerhead"),u=s(l),d=n("../../deps/testcafe-core"),c=s(d),h=u["default"].shadowUI,f=u["default"].nativeMethods,p=c["default"].styleUtils,m=c["default"].positionUtils,g={time:2800,points:[.815,.395],positionByCompletePercent:{0:{left:-35,right:100},.6:{left:100,right:-90},1:{left:100,right:-90}}},v={time:3e3,points:[.84,1],positionByCompletePercent:{0:{left:-200,right:100},.6:{left:107,right:-8},1:{left:107,right:-8}}},y=1e3,_=10,w=1950,E={start:0,middle:.6,end:1},C="indeterminate",x=function(){function t(e,i,n){a(this,t),this.progressBar=e,this.firstValue=i,this.secondValue=n,this.animationInterval=null,this.secondValueAnimationInterval=null,this.secondValueAnimationTimeout=null,this.restartAnimationTimeout=null}return t._updateValueAnimation=function(t,e,i){var n=i.time,s=i.points,a=i.positionByCompletePercent,l=Date.now()-t,u=l/n,d=o(u,s[0],s[1]),c=r(d,a),h=c.left,f=c.right;p.set(e,"left",Math.round(h)+"%"),p.set(e,"right",Math.round(f)+"%")},t.prototype._clearFirstValueAnimation=function(){this.animationInterval&&(f.clearInterval.call(e,this.animationInterval),this.animationInterval=null),p.set(this.firstValue,"left","-35%"),p.set(this.firstValue,"right","100%")},t.prototype._clearSecondValueAnimation=function(){this.secondValueAnimationInterval&&(f.clearInterval.call(e,this.secondValueAnimationInterval),this.secondValueAnimationInterval=null),p.set(this.secondValue,"left","-200%"),p.set(this.secondValue,"right","100%")},t.prototype._startFirstValueAnimation=function(){var i=this;this._clearFirstValueAnimation();var n=Date.now();this.animationInterval=f.setInterval.call(e,function(){t._updateValueAnimation(n,i.firstValue,g)},_)},t.prototype._startSecondValueAnimation=function(){var i=this;this._clearSecondValueAnimation();var n=Date.now();this.secondValueAnimationInterval=f.setInterval.call(e,function(){t._updateValueAnimation(n,i.secondValue,v)},_)},t.prototype._startAnimation=function(){var t=this;this._startFirstValueAnimation(),this.secondValueAnimationTimeout=f.setTimeout.call(e,function(){return t._startSecondValueAnimation()},y),this.restartAnimationTimeout=f.setTimeout.call(e,function(){return t._startAnimation()},w)},t.prototype._stopAnimation=function(){this._clearFirstValueAnimation(),this._clearSecondValueAnimation(),this.secondValueAnimationTimeout&&(f.clearInterval.call(e,this.secondValueAnimationTimeout),this.secondValueAnimationTimeout=null),this.restartAnimationTimeout&&(f.clearInterval.call(e,this.restartAnimationTimeout),this.restartAnimationTimeout=null)},t.prototype.start=function(){h.addClass(this.progressBar,C),this._startAnimation()},t.prototype.stop=function(){h.removeClass(this.progressBar,C),this._stopAnimation()},t}();t["default"]=x,i.exports=t["default"]},"index.js":function(t,e,n){function s(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n("../../deps/hammerhead"),r=s(o),l=n("../../deps/testcafe-core"),u=s(l),d=n("./determinate-indicator"),c=s(d),h=n("./indeterminate-indicator"),f=s(h),p=r["default"].shadowUI,m=u["default"].styleUtils,g="progress-bar",v="value-container",y="value",_=function(){function t(e){a(this,t),this.progressBar=null,this.firstValueElement=null,this.secondValueElement=null,this._create(e),this.determinateIndicator=new c["default"](this.progressBar,this.firstValueElement),this.indeterminateIndicator=new f["default"](this.progressBar,this.firstValueElement,this.secondValueElement)}return t.prototype._create=function(t){this.progressBar=i.createElement("div"),p.addClass(this.progressBar,g),t.appendChild(this.progressBar);var e=i.createElement("div");p.addClass(e,v),this.progressBar.appendChild(e),this.firstValueElement=i.createElement("div"),p.addClass(this.firstValueElement,y),e.appendChild(this.firstValueElement),this.secondValueElement=i.createElement("div"),p.addClass(this.secondValueElement,y),e.appendChild(this.secondValueElement)},t.prototype.show=function(){m.set(this.progressBar,"visibility","visible")},t.prototype.hide=function(){m.set(this.progressBar,"visibility","hidden")},t}();t["default"]=_,e.exports=t["default"]}}},"ui-root.js":function(t,e,n){t.__esModule=!0;var s=n("./deps/hammerhead");t["default"]={uiRoot:null,element:function(){return this.uiRoot||(this.uiRoot=i.createElement("div"),s.shadowUI.getRoot().appendChild(this.uiRoot)),this.uiRoot},hide:function(){this.uiRoot&&(this.uiRoot.style.visibility="hidden")},show:function(){this.uiRoot&&(this.uiRoot.style.visibility="")},remove:function(){var t=s.shadowUI.getRoot();t.parentNode.removeChild(t)}},e.exports=t["default"]}}},screenshots:{"constants.js":function(t,e,i){t.__esModule=!0,t.MARK_BYTES_PER_PIXEL=4,t.MARK_LENGTH=32,t.MARK_HEIGHT=10,t.MARK_RIGHT_MARGIN=10}}}}})("testcafe-phoenix/src/client/ui/index")}t(window)}();